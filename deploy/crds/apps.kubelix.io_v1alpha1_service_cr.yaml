apiVersion: apps.kubelix.io/v1alpha1
kind: Service
metadata:
  name: example
spec:
  projectName: sample-web-app
  singleton: false # implies replica = 1 & deployment strategy = recreate
  image: paulbouwer/hello-kubernetes:1.5 # {{ env "CI_COMMIT_SHA" | default "latest" }}

  ports:
    - name: http
      container: 8080
      ingresses:
        - host: "example.klinkert.io"

  resources:
    limits:
      cpu: "1"
      memory: 1Gi
    requests:
      cpu: 100m
      memory: 128Mi

  env:
    KEY1: VALUE1
    KEY2: value2

  files:
    - path: /config.yaml
      content: |
        key: value
        map:
          something: different
